@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  h1 {
    /* @apply text-4xl; */
    font-size: clamp(24px, 4vw, 36px);
    line-height: clamp(28px, 4vw, 40px);
  }

  h2 {
    /* @apply text-3xl; */
    font-size: clamp(20px, 3vw, 28px);
    line-height: clamp(24px, 3vw, 36px);
  }

  h3 {
    /* @apply text-2xl; */
    font-size: clamp(18px, 2.5vw, 24px);
    line-height: clamp(22px, 2.5vw, 32px);
  }

  h4 {
    /* @apply text-xl; */
    font-size: clamp(16px, 2vw, 20px);
    line-height: clamp(20px, 2vw, 28px);
  }

  article {
    /* @apply text-lg; */
    font-size: clamp(16px, 1.5vw, 18px);
    line-height: clamp(20px, 1.5vw, 24px);
  }

  p {
    @apply text-lg;
  }

  :root {
    /* Basic */
    --background: hsl(0, 0%, 100%);
    --foreground: hsl(0, 0%, 15%);

    --card: hsl(0, 0%, 100%);
    --card-foreground: hsl(0, 0%, 12%);

    --popover: hsl(0, 0%, 100%);
    --popover-foreground: hsl(0, 0%, 12%);

    /* Colors */
    --primary: hsl(0, 0%, 12%);
    --primary-foreground: hsl(0, 0%, 100%);

    --secondary: hsl(0, 0%, 12%);
    --secondary-foreground: hsl(0, 0%, 100%);

    --muted: hsl(0, 0%, 13%);
    --muted-foreground: hsl(0, 0%, 70%);

    --accent: hsl(0, 0%, 15%);
    --accent-foreground: hsl(0, 0%, 100%);

    /* Borders */
    --border: hsl(0, 0%, 100%);
    --input: hsl(0, 0%, 100%);
    --ring: hsl(0, 0%, 15%);

    --radius: 0.5rem;

    /* Tiptap */
    /* // Base theme colors */
    --rte-bg: #fff;
    --rte-fg: #1f2328;
    --rte-border: #d1d9e0;
    --rte-primary: #0969da;
    --rte-primary-fg: #fff;
    --rte-secondary: #f0f1f3;
    --rte-secondary-fg: #59636e;
    --rte-muted: #f6f8fa;
    --rte-muted-fg: #59636e;
    --rte-accent: #818b981f;
    --rte-accent-fg: #59636e;
    --rte-tooltip: #25292e;
    --rte-tooltip-fg: #f0f0f0;
    --rte-overlay: #32324d33;

    /* // Syntax highlighting (GitHub Light theme) */
    --rte-hljs-comment: #6a737d;
    --rte-hljs-keyword: #d73a49;
    --rte-hljs-entity: #6f42c1;
    --rte-hljs-function: #6f42c1;
    --rte-hljs-variable: #005cc5;
    --rte-hljs-constant: #005cc5;
    --rte-hljs-string: #032f62;
    --rte-hljs-regexp: #032f62;
    --rte-hljs-markup: #22863a;
    --rte-hljs-builtin: #e36209;
    --rte-hljs-inserted: #34d058;
    --rte-hljs-deleted: #b31d28;
    --rte-hljs-changed: #e36209;
    --rte-hljs-ignored: #f6f8fa;

    /* // Editor settings */
    --rte-editor-font-size: 15px;
    --rte-editor-line-height: 1.5;
    --rte-editor-font: var(--font-sans);
    --rte-editor-code-font: var(--font-mono);
    --rte-editor-code-bg: #f6f8fa;
    --rte-editor-scrollbar: #00000040;
    --rte-editor-selection: #2383e247;

    --rte-radius: 0.5rem;
  }

  .dark {
    /* Basic */
    --background: hsl(0, 0%, 12%);
    --foreground: hsl(0, 0%, 100%);

    --card: hsl(0, 0%, 12%);
    --card-foreground: hsl(0, 0%, 100%);

    /* Colors */
    --popover: hsl(0, 0%, 12%);
    --popover-foreground: hsl(0, 0%, 100%);

    --primary: hsl(0, 0%, 100%);
    --primary-foreground: hsl(0, 0%, 12%);

    --secondary: hsl(0, 0%, 12%);
    --secondary-foreground: hsl(0, 0%, 100%);

    /* Borders */
    --border: hsl(0, 0%, 12%);
    --input: hsl(0, 0%, 12%);
    --ring: hsl(0, 0%, 100%);

    /* Tiptap */

    /* // Dark theme colors */
    --rte-bg: #0d1017;
    --rte-fg: #f0f6fc;
    --rte-border: #3d444d;
    --rte-primary: #4493f8;
    --rte-tooltip: #3d444d;
    --rte-bubble: #151b23;
    --rte-overlay: #ffffff30;

    --rte-secondary: #2e373e;
    --rte-secondary-fg: #b1b8c0;
    --rte-muted: #1a2029;
    --rte-muted-fg: #b1b8c0;
    --rte-accent: #2d3440;
    --rte-accent-fg: #b1b8c0;

    /* // Syntax highlighting (GitHub Dark theme) */
    --rte-hljs-comment: #8b949e;
    --rte-hljs-keyword: #ff7b72;
    --rte-hljs-entity: #d2a8ff;
    --rte-hljs-function: #d2a8ff;
    --rte-hljs-variable: #79c0ff;
    --rte-hljs-constant: #79c0ff;
    --rte-hljs-string: #a5d6ff;
    --rte-hljs-regexp: #a5d6ff;
    --rte-hljs-markup: #7ee787;
    --rte-hljs-builtin: #ffa657;
    --rte-hljs-inserted: #3fb950;
    --rte-hljs-deleted: #f85149;
    --rte-hljs-changed: #ffa657;
    --rte-hljs-ignored: #161b22;

    /* Editor settings */
    --rte-editor-code-bg: #1a2029;
    --rte-editor-scrollbar: #ffffff40;

    /* //   Box shadow */
    --rte-shadow-1:
      0px 0px 0px 1px #3d444d, 0px 6px 12px -3px #01040966,
      0px 6px 18px 0px #01040966;
    --rte-shadow-2:
      0px 0px 0px 1px #3d444d, 0px 8px 16px -4px #01040966,
      0px 4px 32px -4px #01040966, 0px 24px 48px -12px #01040966,
      0px 48px 96px -24px #01040966;
    --rte-shadow-3: 0px 0px 0px 1px #3d444d, 0px 24px 48px 0px #010409;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: "Inter", sans-serif;
  }
}

@layer components {
  .underline-expand {
    position: relative;
    display: inline-block;
    overflow: hidden;
    padding-top: 8px;
    padding-bottom: 5px;
  }

  .underline-expand::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0px;
    height: 3px;
    background-color: var(--foreground);
    transition: all 0.4s ease;
    transform: translateX(-50%);
  }

  .underline-expand:hover::after {
    width: 100%;
    left: 0;
    transform: translateX(0%);
  }
}

/* BASE */
body {
  overflow-x: hidden;
}

/* Component */
.pagination .active {
  background-color: grey;
  color: white;
}

/* MDEditor */
.markdown-plus ol {
  padding: 3px 0px 0px 15px;
  list-style-type: decimal;
}

.markdown-plus ol li {
  margin: 0 5px;
  padding: 0 5px;
}

iframe.ql-video {
  width: 100%;
  min-width: 280px !important;
  max-width: 640px !important;
  height: 25vw;
  min-height: 250px;
}

.ql-toolbar {
  position: sticky !important;
  z-index: 100 !important;
  background: hsl(var(--background)) !important;
  top: 0 !important;
}

.ql-clipboard {
  position: fixed !important;
  left: 50% !important;
  top: 50% !important;
  display: none;
}

/* Amplify */
.amplify-button--primary {
  background: hsl(var(--foreground)) !important;
}

.amplify-button--primary:hover {
  opacity: 0.8 !important;
}

.amplify-button--link {
  color: hsl(var(--foreground)) !important;
}

.amplify-button--link:hover {
  background: hsl(var(--background)) !important;
}

/* TipTap Editor Styles */
.editor-container {
  display: flex;
  flex-direction: column;
  min-height: 100%;
  width: 100%;
}

.ProseMirror {
  flex: 1;
  padding: 1rem;
  border-top: 1px solid var(--rte-border);
  background: var(--rte-bg);
  border-radius: 0 0 5px 5px;
  min-height: 150px;
  width: 100%;
  max-width: 100% !important;
}

.rte-editor__content {
  max-width: 768px !important;
}

.ProseMirror:focus {
  outline: none;
  flex: 1;
}

.ProseMirror > * + * {
  margin-top: 0.75em;
}

.ProseMirror ul,
.ProseMirror ol {
  padding: 0 1rem;
}

.ProseMirror ol {
  list-style-type: decimal;
}

.ProseMirror ul {
  list-style-type: disc;
}

.ProseMirror code {
  background-color: rgba(#616161, 0.1);
  color: #616161;
}

.ProseMirror pre {
  background: #0d0d0d;
  color: #fff;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
}

.ProseMirror pre code {
  color: inherit;
  padding: 0;
  background: none;
  font-size: 0.8rem;
}

.ProseMirror img {
  max-width: 100%;
  height: auto;
}

.ProseMirror blockquote {
  padding-left: 1rem;
  border-left: 2px solid rgba(#0d0d0d, 0.1);
}

.ProseMirror hr {
  border: none;
  border-top: 2px solid rgba(#0d0d0d, 0.1);
  margin: 2rem 0;
}

.prose {
  max-width: none !important;
  width: 100% !important;
}

/* Editor toolbar styles */
.editor-header {
  border: 1px solid #ccc;
  border-radius: 5px 5px 0 0;
  padding: 0.5rem;
  background: #f5f5f5;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.editor-header button {
  border: none;
  background: none;
  padding: 0.3rem 0.6rem;
  border-radius: 3px;
  cursor: pointer;
}

.editor-header button:hover {
  background-color: #e0e0e0;
}

.editor-header button.is-active {
  background-color: #d0d0d0;
}

.editor-content {
  border: 1px solid #ccc;
  border-top: none;
}

/* OTHER */
.markdownContent {
  /* iamges */
  img {
    max-width: 512px;
    height: auto;
    margin: 1rem 0;
    border-radius: 0.5rem;
  }
  /* Table styles */
  table {
    border-collapse: collapse;
    width: 100%;
    margin: 1rem 0;
    position: relative;
    font-size: 0.85rem;
    display: block;
    overflow: auto;
    max-width: 100%;
    max-height: 600px;
  }

  /* YouTube video and iframe styles */
  iframe,
  iframe.yt-video,
  .youtube-video-container iframe {
    width: 100% !important;
    max-width: 100% !important;
    aspect-ratio: 16 / 9;
    height: auto !important;
    min-height: 320px;
  }

  .youtube-video-container {
    position: relative;
    width: 100%;
    margin: 1.5rem 0;
    overflow: hidden;
  }

  /* Link styles */
  a {
    color: #2563eb; /* Blue color to distinguish from regular text */
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
    font-weight: 500;
    transition: all 0.2s ease;
  }

  a:hover {
    color: #1d4ed8; /* Slightly darker blue on hover */
    text-decoration-thickness: 2px;
  }

  /* Dark mode link styles */
  .dark & a {
    color: #60a5fa; /* Lighter blue for dark mode */
  }

  .dark & a:hover {
    color: #93c5fd; /* Even lighter blue on hover in dark mode */
  }

  /* Existing styles continue */
  th,
  td {
    border: 1px solid #ddd;
    padding: 6px;
    text-align: left;
    min-width: 100px; /* Ensures columns don't get too narrow */
  }

  th {
    background-color: rgba(255, 255, 255, 0.2);
    position: sticky;
    top: 0;
    z-index: 1;
  }

  .dark th {
    background-color: rgba(255, 255, 255, 0.5);
    border-color: #4a5568;
  }

  .dark td {
    border-color: #4a5568;
  }

  /* Table wrapper and expand button */
  .table-wrapper {
    position: relative;
    /* margin: 2rem 0; */
    /* border: 1px solid rgba(255, 255, 255, 0.1); */
    /* border-radius: 0.5rem; */
    /* padding: 0.5rem; */
  }

  .dark .table-wrapper {
    border-color: #4a5568;
  }

  .expand-table-btn {
    opacity: 0.7;
    transition: opacity 0.2s;
    z-index: 2;
  }

  .expand-table-btn:hover {
    opacity: 1;
  }

  /* Adjust table margins when in a wrapper */
  .table-wrapper table {
    margin: 0;
  }

  /* List styles */
  ul,
  ol {
    padding-left: 1.5rem;
    margin: 1rem 0;
  }

  ul {
    list-style-type: disc;
  }

  ol {
    list-style-type: decimal;
  }

  li {
    margin: 0.5rem 0;
  }

  /* Nested lists */
  ul ul,
  ol ul {
    list-style-type: circle;
  }

  ul ul ul,
  ol ul ul {
    list-style-type: square;
  }

  ol ol,
  ul ol {
    list-style-type: lower-alpha;
  }

  ol ol ol,
  ul ol ol {
    list-style-type: lower-roman;
  }
}

/* Add this to ensure tables within prose class maintain correct sizing */
.prose table {
  width: 100%;
  table-layout: auto;
  font-size: 0.85rem;
}
